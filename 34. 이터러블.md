# 34. 이터러블 - 22.03.31

---

---

## 이터레이션 프로토콜

이터레이션 프로토콜은 순회 가능한 데이터 컬렉션을 만들기 위한 약속이다.

ES6 이전에 순회 가능한 데이터 컬렉션은 통일된 규약없이 각자 나름의 구조를 가지고 다양한 방법으로 순회했다.

ES6에서는 데이터 컬렉션을 이터레이션 프로토콜을 준수하는 이터러블로 통일하여 for ... of 문, 스프레드 문접, 배열 디스터럭처링 할당의 대상으로 사용할 수 있도록 일원화 했다.

### 이터러블 프로토콜 / 이터레이터 프로토콜

**이터러블 프로토콜**

Symbol.iterator 를 프로퍼티 키로 사용한 메서드를 직접 구현하거나 프로토타입 체인을 통해 상속 받은 Symbol.iterator 메서드를 호출하면 이터레이터 프로토콜을 준수한 이터레이터를 반환한다.

**이터러블 프로토콜을 준수한 객체를 이터러블이라고 한다.**

for ... of 문으로 순회할 수 있으며 스프레드 문법과 배열 디스트럭처링 할당의 대상으로 사용 가능

**이터레이터 프로토콜**

이터버블의 Symbol.iterator 메서드를 호출하면 이터레이터를 반환한다.

이터레이터는 next 메서드를 소유하면 next 호출하면 이터러블을 순회하며 value , dome 프로퍼티를 갖는 이터러블 리절트 객체를 반한다.

**이터레이터 프로토콜 준수한 객체를 이러테이터라고 한다.**

이터레이터는 이터러블의 요소 타색을 위한 포인터다.

![Untitled](https://github.com/sTIL-us/javascript-deepdive-study/blob/e4b124b7c509a1856730509f0733dbd2cd59c356/34.%20%EC%9D%B4%ED%84%B0%EB%9F%AC%EB%B8%94/Untitled.png)

### 이터러블

이터러블 프로토콜을 준수한 객체를 이터러블이라고 한다.

Symbol.iterator를 프로퍼티 키로 사용한 메서드를 구현하거나 프로토타입 체인으로 상속받은 객체이다.

이터러블인지 판별하는 함수는 다음과 같이 구현한다.

```jsx
const isIterable = v => v !==null && typeof v[Symbol.iterator] === 'function' ;

isIterable([]); //true
isIterable(new Map()); //true
isIterable({}); //false
```

배열은 Array.prototype의 Symbol.iterator 메서드를 상속받는 이터러블이다.

```jsx
const array = [1, 2, 3];
//배열은 Array.prototype의 Symbol.iterator 메서드를 상속받는 이터러블
console.log(Symbol.iterator in array); //true

for (const item of array){
	console.log(item);
}

//이터러블인 배열은 스프레드 문법의 대상으로 사용할 수 있다.
console.log([...array]); //[ 1, 2, 3]

//이터러블인 배열은 배열 디스트럭처링 할당의 대상으로 사용할 수 있다.
const [a, ...rest] = array;
console.log(a, rest); //1, [2, 3]
	
```

Symbol.iterator 메서드를 직접 구현하지 않거나 상속받지 않은 일반 객체는 이터러블 프로토콜을 준수한 이터러블이 아니다.

일반 객체는 for ... of 문으로 순회할 수 없고 스프레드 문법과 배열 디스트럭처링 할당의 대상으로 사용할 수 없다.

```jsx
const obj = { a: 1, b : 2};

console.log(Symbol.iterator in obj); //false

//이터러블 아닌 일반 객체는 for ... of 순회 X
for(const item of obj){ //TypeError
	console.log(item);
}

const [a,b] = obj; //TypeError
```

2021년 에는 스프레드 프로퍼티 제안에서 일반 객체에 스프레드 문법의 사용을 허용한다.

```jsx
const obj = { a : 1, b : 2};

console.log({ ...obj}); // { a : 1, b : 2}
```

> 2022.03-31 - TIL
1. ES6 이전에 순회 가능한 데이터 컬렉션은 통일된 규약없이 각자 나름의 구조를 가지고 다양한 방법으로 순회했다.
2. 이터레이션 프로토콜은 순회 가능한 데이터 컬렉션을 만들기 위한 약속이다.
3. 그래서 규약에 이터러블 프로토콜 / 이터레이션 프로토콜 이 있고 이 규약들을 지켜서 나오게 이터러블 / 이터레이션이다.
>
