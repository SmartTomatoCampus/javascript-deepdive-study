# 13. 스코프

생성일: 2022년 3월 3일 오후 8:46

## 13. 1 스코프란?

- 모든 식별자는 자신이 선언된 위치에 의해 자신을 참조할 수 있는 범위가 결정됨

       → 이를 스코프라 한다. 즉, 식별자가 유효한 범위

- 식별자를 검색 할 때 사용하는 규칙

```jsx
var x = 'global';

function foo(){
var x = 'local';
console.log(x);  
}
foo();

console.log(x);   
```

<aside>
💡 이러한 상황과 같이 이름이 같은 두 변수 중에서 어떤 변수를 참조해야 할 것인지를 결정해야하는데, **이를 식별자 결정이라고 한다.**

</aside>

---

## 13. 2 스코프의 종류

- 변수는 자신이 선언되어 있는 위치에 의해 스코프가 결정됨
- 전역에서 선언된 변수는 전역 스코프를 갖는 전역변수이고, 지역에서 선언된 변수는 지역스코프를 갖는 지역변수이다.

| 구분 | 설명 | 스코프 | 변수 |
| --- | --- | --- | --- |
| 전역 | 코드의 가장 바깥 영역 | 전역 스코프 | 전역 변수 |
| 지역 | 함수 몸체 내부 | 지역 스코프 | 지역 변수 |

### 13. 2. 1 전역과 전역 스코프

![Untitled](13%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20e0967/Untitled.png)

- 전역이란 코드의 가장 바깥 영역을 말함
- 전역 변수는 어디서든지 참조 할 수 있다

### 13. 2. 2 지역과 지역 스코프

- 함수 몸체 내부를 지역이라고 부른다
- 지역 변수는 지역 스코프와 하위 지역 스코프에서 유효하다.
- inner 함수 내부에 선언된 x 변수도 지역변수이다

→ 전역변수 x를 참조하지 않는 이유는 스코프 체인을 통해 참조할 변수를 검색했기 때문에

---

## 13. 3 스코프 체인

<aside>
💡 함수가 몸체 내부에서 또 다른 함수가 정의되어 중첩되듯이 스코프도 중첩 될 수 있다. 이는 스코프가 함수의 중첩에 의해 구조를 갖는다는 것을 말한다.

</aside>

![Untitled](13%20%E1%84%89%E1%85%B3%E1%84%8F%E1%85%A9%E1%84%91%E1%85%B3%20e0967/Untitled%201.png)

- 스코프가 계층적으로 연결 된 것을 스코프 체인이라 함
- 자바스크립트 엔진은 스코프체인을 통해 상위 스코프 방향으로 이동하며 선언 된 변수를 검색함
- 상위스코프에서 선언한 변수는 하위스코프에서도 참조 할 수 있음

### 13. 3. 1 스코프 체인에 의한 변수 검색

자바스크립트 엔진은 변수를 참조하는 코드의 스코프에서 시작해서 상위 방향으로 이동하며 선언된 변수를 검색한다

→ 하위스코프에서 유효한 변수는 상위 스코프에서 참조할 수 없다

### 13. 3. 2 스코프 체인에 의한 함수 검색

스코프는 “식별자를 검색하는 규칙”이다.

1. foo 함수 호출
2. 함수를 가리키는 식별자 foo를 검색

```jsx
function foo(){
	console.log('global funciton 'foo');
}

function bar(){
	function foo(){
	console.log('local funciton foo');
	}
  foo();
}
bar();
```

---

## 13. 4 함수 레벨 스코프

- 코드블록이 지역 스코프를 만드는데 이러한 특성을 블록레벨 스코프라한다.
- 하지만 var 키워드는 오직 함수 코드블록만 지역 스코프로 인정한다.

      → 이를 함수레벨스코프라 한다.

- let, const 키워드는 블록레벨 스코프를 지원한다.

```jsx
var i = 10;

for(var i = 0; i < 5; i++){
	console.log(i);  // 0 1 2 3 4 
}

console.log(i);   // 5 -> 의도치 않게 값이 바뀌었다.
```

---

## 13. 5 렉시컬 스코프

**렉시컬스코프란 함수를 어디에서 호출했는지가 아니라 함수를 어디서 정의했는지에 따라 상위 스코프를 결정하는 것이다.**

```jsx
var x = 1;

function foo(){
	var x = 10;
  bar();
}

funciton bar(){
	console.log(x);
}
foo();
bar();   // 전역에서 정의 되었기 때문에 전역스코프를 기억함 -> 호출 된 곳과 상관 없이 
         // 기억하고 있는 스코프를 상위 스코프로 사용함
         // 결과적으로 10 , 1이 아닌 1 1이 출력 됨
```